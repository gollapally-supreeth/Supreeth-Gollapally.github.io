import{j as i,r as d}from"./react-vendor-DlAMHaFI.js";import{m as U,K as _,Q as R,V as z,w as B,X as O,A as K}from"./three-bundle-DVfC6CUv.js";import"./vendor-CXo-eD7O.js";import"./physics-bundle-CmnDU9Yz.js";K({TextGeometry:R});const Q="https://threejs.org/examples/fonts/helvetiker_bold.typeface.json",W=({symbol:p,isHovered:h})=>{const F=d.useRef(),[y,k]=d.useState(null);d.useEffect(()=>{new _().load(Q,c=>{k(c)})},[]);const{positions:E,randomPositions:a}=d.useMemo(()=>{if(!y)return{positions:[],randomPositions:[]};const c=Math.min(1.5,3.5/Math.max(2,p.length)),m=new R(p,{font:y,size:c,height:0,curveSegments:12,bevelEnabled:!1});m.center();const A=m.attributes.position,t=m.index,L=t?t.count/3:A.count/3,v=[],l=e=>new z().fromBufferAttribute(A,e),P=[];let T=0;for(let e=0;e<L;e++){let x,u,s;t?(x=t.getX(e*3),u=t.getX(e*3+1),s=t.getX(e*3+2)):(x=e*3,u=e*3+1,s=e*3+2);const n=l(x),r=l(u),g=l(s),b=new z().subVectors(r,n),j=new z().subVectors(g,n),f=.5*new z().crossVectors(b,j).length();P.push(f),T+=f}const G=4e3;for(let e=0;e<G;e++){const x=Math.random()*T;let u=0,s=0;for(let M=0;M<P.length;M++)if(u+=P[M],u>=x){s=M;break}let n=Math.random(),r=Math.random();n+r>1&&(n=1-n,r=1-r);const g=1-n-r;let b,j,w;t?(b=t.getX(s*3),j=t.getX(s*3+1),w=t.getX(s*3+2)):(b=s*3,j=s*3+1,w=s*3+2);const f=l(b),X=l(j),C=l(w),I=n*f.x+r*X.x+g*C.x,N=n*f.y+r*X.y+g*C.y,S=n*f.z+r*X.z+g*C.z;v.push(I,N,S)}const V=new Float32Array(v.length);for(let e=0;e<v.length;e++)V[e]=(Math.random()-.5)*12;return{positions:new Float32Array(v),randomPositions:V}},[y,p]),o=d.useMemo(()=>new Float32Array(a.length),[a]);return d.useEffect(()=>{a.length>0&&o.set(a)},[a,o]),B(c=>{if(!F.current||E.length===0)return;const m=h?E:a,A=h?.08:.03;for(let t=0;t<o.length;t++)o[t]+=(m[t]-o[t])*A,h?o[t]+=Math.sin(c.clock.elapsedTime*3+t)*.003:o[t]+=Math.cos(c.clock.elapsedTime*.5+t)*.005;F.current.geometry.attributes.position.needsUpdate=!0}),y?i.jsx(O,{children:i.jsxs("points",{ref:F,children:[i.jsx("bufferGeometry",{children:i.jsx("bufferAttribute",{attach:"attributes-position",count:o.length/3,array:o,itemSize:3})}),i.jsx("pointsMaterial",{size:.035,color:"#C7FB38",sizeAttenuation:!0,depthWrite:!1,transparent:!0,opacity:.9})]})}):null},Z=({symbol:p,isHovered:h})=>i.jsx("div",{className:"w-full h-full absolute inset-0 z-0 pointer-events-none",children:i.jsxs(U,{camera:{position:[0,0,5],fov:50},children:[i.jsx("ambientLight",{intensity:.5}),i.jsx(W,{symbol:p,isHovered:h})]})});export{Z as default};
