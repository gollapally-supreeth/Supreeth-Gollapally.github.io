import{j as a,r as d}from"./react-vendor-B9Wr84HF.js";import{C as U,F as _,T as R,V as z,g as B,l as O,j as W}from"./three-bundle-KXKsNxs0.js";W({TextGeometry:R});const q="https://threejs.org/examples/fonts/helvetiker_bold.typeface.json",D=({symbol:h,isHovered:p})=>{const F=d.useRef(),[y,k]=d.useState(null);d.useEffect(()=>{new _().load(q,c=>{k(c)})},[]);const{positions:E,randomPositions:i}=d.useMemo(()=>{if(!y)return{positions:[],randomPositions:[]};const c=Math.min(1.5,3.5/Math.max(2,h.length)),m=new R(h,{font:y,size:c,height:0,curveSegments:12,bevelEnabled:!1});m.center();const v=m.attributes.position,t=m.index,L=t?t.count/3:v.count/3,A=[],l=e=>new z().fromBufferAttribute(v,e),P=[];let V=0;for(let e=0;e<L;e++){let x,u,s;t?(x=t.getX(e*3),u=t.getX(e*3+1),s=t.getX(e*3+2)):(x=e*3,u=e*3+1,s=e*3+2);const n=l(x),r=l(u),g=l(s),b=new z().subVectors(r,n),j=new z().subVectors(g,n),f=.5*new z().crossVectors(b,j).length();P.push(f),V+=f}const G=4e3;for(let e=0;e<G;e++){const x=Math.random()*V;let u=0,s=0;for(let w=0;w<P.length;w++)if(u+=P[w],u>=x){s=w;break}let n=Math.random(),r=Math.random();n+r>1&&(n=1-n,r=1-r);const g=1-n-r;let b,j,M;t?(b=t.getX(s*3),j=t.getX(s*3+1),M=t.getX(s*3+2)):(b=s*3,j=s*3+1,M=s*3+2);const f=l(b),C=l(j),T=l(M),I=n*f.x+r*C.x+g*T.x,N=n*f.y+r*C.y+g*T.y,S=n*f.z+r*C.z+g*T.z;A.push(I,N,S)}const X=new Float32Array(A.length);for(let e=0;e<A.length;e++)X[e]=(Math.random()-.5)*12;return{positions:new Float32Array(A),randomPositions:X}},[y,h]),o=d.useMemo(()=>new Float32Array(i.length),[i]);return d.useEffect(()=>{i.length>0&&o.set(i)},[i,o]),B(c=>{if(!F.current||E.length===0)return;const m=p?E:i,v=p?.08:.03;for(let t=0;t<o.length;t++)o[t]+=(m[t]-o[t])*v,p?o[t]+=Math.sin(c.clock.elapsedTime*3+t)*.003:o[t]+=Math.cos(c.clock.elapsedTime*.5+t)*.005;F.current.geometry.attributes.position.needsUpdate=!0}),y?a.jsx(O,{children:a.jsxs("points",{ref:F,children:[a.jsx("bufferGeometry",{children:a.jsx("bufferAttribute",{attach:"attributes-position",count:o.length/3,array:o,itemSize:3})}),a.jsx("pointsMaterial",{size:.035,color:"#C7FB38",sizeAttenuation:!0,depthWrite:!1,transparent:!0,opacity:.9})]})}):null},Q=({symbol:h,isHovered:p})=>a.jsx("div",{className:"w-full h-full absolute inset-0 z-0 pointer-events-none",children:a.jsxs(U,{camera:{position:[0,0,5],fov:50},children:[a.jsx("ambientLight",{intensity:.5}),a.jsx(D,{symbol:h,isHovered:p})]})});export{Q as default};
